<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Jurre Vriesen Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Jurre Vriesen Blog Atom Feed"><title data-react-helmet="true">Posts tagged &quot;php&quot; | Jurre Vriesen</title><meta data-react-helmet="true" property="og:title" content="Posts tagged &quot;php&quot; | Jurre Vriesen"><meta data-react-helmet="true" name="description" content="Blog | Tagged &quot;php&quot;"><meta data-react-helmet="true" property="og:description" content="Blog | Tagged &quot;php&quot;"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/styles.70c5fce8.css">
<link rel="preload" href="/styles.2a519249.js" as="script">
<link rel="preload" href="/runtime~main.904bade3.js" as="script">
<link rel="preload" href="/main.13ae4807.js" as="script">
<link rel="preload" href="/1.576f7d83.js" as="script">
<link rel="preload" href="/2.b252abcc.js" as="script">
<link rel="preload" href="/6875c492.db1dba85.js" as="script">
<link rel="preload" href="/c4f5d8e4.0542282a.js" as="script">
<link rel="preload" href="/8215270c.ed00a3dd.js" as="script">
<link rel="preload" href="/a97bcd2a.6c773488.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><img src="https://jurrevriesen.nl/img/logo.svg" alt="Jurre Vriesen" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="https://jurrevriesen.nl/img/logo.svg" alt="Jurre Vriesen" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Jurre Vriesen</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="https://jurrevriesen.nl/img/logo.svg" alt="Jurre Vriesen" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="https://jurrevriesen.nl/img/logo.svg" alt="Jurre Vriesen" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Jurre Vriesen</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/which-frontend-framework-should-you-use">Which frontend framework should you use?</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/integrating-webpack-and-babel-in-a-legacy-project">Integrating Webpack and Babel in a legacy project</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/ansible-boilerplate-for-webapps">Ansible boilerplate for webapps with Docker, Traefik and Let&#x27;s Encrypt</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/restart-docker-container-on-image-change">Restart Docker container on image change</a></li></ul></div></div><main class="col col--8"><h1>1 post tagged with &quot;php&quot;</h1><a href="/tags">View All Tags</a><div class="margin-vert--xl"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_3-lP"><a href="/integrating-webpack-and-babel-in-a-legacy-project">Integrating Webpack and Babel in a legacy project</a></h2><div class="margin-vert--md"><time datetime="2021-12-02T00:00:00.000Z" class="blogPostDate_Ta7i">December 2, 2021  Â· 3 min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"></div></div></header><section class="markdown"><p>Let&#x27;s say you have an old legacy application written in PHP or Perl that is used a lot over time. And while developing you come across a new fancy javscript library with instructions like <code>npm i super-dope-library</code> and a code example like <code>import {coolStuff} from &#x27;super-dope-library&#x27;</code>. How is that going to work?</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="what-do-you-need"></a>What do you need<a class="hash-link" href="#what-do-you-need" title="Direct link to heading">#</a></h2><ul><li><strong>Package manager</strong> - Yarn or NPM. This let&#x27;s you install and manage third party packages.</li><li><strong>Module bundler</strong> - For example webpack or esbuild. Combines all the javascript from your project and the third party packages in optimized files.</li><li><strong>Transpiler</strong> - For example Babel. Compiles new JavaScript code to old JavaScript code so older browsers understand it.</li></ul><p><em>The examples in this post use NPM, webpack and Babel. The alternatives are all sharing the same concepts</em></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="setup-npm-webpack-and-babel"></a>Setup NPM, webpack and Babel<a class="hash-link" href="#setup-npm-webpack-and-babel" title="Direct link to heading">#</a></h2><p>Node and NPM need to be installed and accessible from the commandline. Then run <code>npm init</code> at your project root. This will create a <code>package.json</code> file.</p><p>After that install the webpack and Babel dependencies:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -D babel-loader @babel/core @babel/preset-env webpack webpack-cli</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This will add dependencies to the <code>package.json</code> file. Now add a <code>webpack.config.js</code> file to the root of the project:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> path </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;path&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  entry</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./src/index.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  output</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    path</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;dist&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    filename</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;bundle.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  module</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  rules</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      test</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.m?js$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exclude</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">(node_modules|bower_components)</span><span class="token regex regex-delimiter">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      use</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        loader</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;babel-loader&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        options</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          presets</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@babel/preset-env&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The entry file <code>./src/index.js</code> will be the starting point of the Javascript and can be changed to a location that fits the current project.</p><p>The bundled and transpiled output file will be stored in <code>&lt;project-root&gt;/dist/bundle.js</code>. This can also be a location that fits the current project.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="writing-code-that-uses-a-npm-package"></a>Writing code that uses a NPM package<a class="hash-link" href="#writing-code-that-uses-a-npm-package" title="Direct link to heading">#</a></h2><p>The <a href="https://www.npmjs.com/package/pluralize" target="_blank" rel="noopener noreferrer">pluralize</a> NPM package can be used to pluralize words. Let&#x27;s create a high-end application where a user can enter a random english word and see the pluralized version:</p><p>Install the library:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> pluralize</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Add the following code to <code>./src/index.js</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-JavaScript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import pluralize from &#x27;pluralize&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const word = prompt(&quot;Enter an English word to pluralize&quot;, &quot;cow&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const pluralized = pluralize(word);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">alert(pluralized);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Create the <code>/dist/bundle.js</code> file:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./node_modules/.bin/webpack</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="integrate-it-in-a-legacy-project"></a>Integrate it in a legacy project<a class="hash-link" href="#integrate-it-in-a-legacy-project" title="Direct link to heading">#</a></h2><p>After the <code>bundle.js</code> file is created it is fairly simple to integrate it. Just add the following script tag somewhere in the HTML and make sure the file is served by the webserver.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-html codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">script</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">src</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">/dist/bundle.js</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="github-example"></a>Github Example<a class="hash-link" href="#github-example" title="Direct link to heading">#</a></h2><p>The steps above are implemented in an example PHP project: <a href="https://github.com/jurruh/legacy-php-webpack-babel-example" target="_blank" rel="noopener noreferrer">https://github.com/jurruh/legacy-php-webpack-babel-example</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="notes"></a>Notes<a class="hash-link" href="#notes" title="Direct link to heading">#</a></h2><ul><li>It is not necessary to ship the node_modules folder and the untranspiled Javascript code to production. These can be removed in the build process to gain smaller packages.</li><li>Add the dist folder to .gitignore. The code can be generated and therefor it should not be in version control.</li><li>You should explore the webpack CLI to see what is capable of: <a href="https://www.npmjs.com/package/webpack-cli" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/webpack-cli</a></li></ul></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/tags/webpack">webpack</a><a class="margin-horiz--sm" href="/tags/babel">babel</a><a class="margin-horiz--sm" href="/tags/legacy">legacy</a><a class="margin-horiz--sm" href="/tags/php">php</a></div><div class="col text--right"><a aria-label="Read more about Integrating Webpack and Babel in a legacy project" href="/integrating-webpack-and-babel-in-a-legacy-project"><strong>Read More</strong></a></div></footer></article></div></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Connect</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.linkedin.com/in/jurre-vriesen-72a520116/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://github.com/jurruh" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/styles.2a519249.js"></script>
<script src="/runtime~main.904bade3.js"></script>
<script src="/main.13ae4807.js"></script>
<script src="/1.576f7d83.js"></script>
<script src="/2.b252abcc.js"></script>
<script src="/6875c492.db1dba85.js"></script>
<script src="/c4f5d8e4.0542282a.js"></script>
<script src="/8215270c.ed00a3dd.js"></script>
<script src="/a97bcd2a.6c773488.js"></script>
</body>
</html>